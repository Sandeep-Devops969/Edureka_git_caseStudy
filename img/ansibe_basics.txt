
A: [edureka@ip-172-31-6-120 tmp]$ cat c.yml 
---
- hosts: webserver
  become: true
  become_user: root
  tasks:
  - name: check the FS utilization
    shell: df /tmp --output\=avail | tail -1
    register: freespace
  - name: clear space
    shell: '> /tmp/kush'
    when: freespace > 30000
[edureka@ip-172-31-6-120 tmp]$ cat a.yml 
---
- hosts: webserver
  become: true
  become_user: root
  tasks:
  - name: install package
    yum: name=httpd123 state=present
    ignore_errors: true
  - name: start the service
    service: name=httpd state=stopped
[edureka@ip-172-31-6-120 tmp]$ cat b.yml 
---
- hosts: webserver
  become: true
  become_user: root
  tasks:
  - name: copy the file
    copy: src=/tmp/a.sh dest=/tmp/
  - name: execute the script
    command: sh /tmp/a.sh



Audience Question

Q: great approach please share sir

A: 36  ansible -m yum -a "name=httpd state=present" webserver --become
   37  vi /etc/sudoers
   38  clear
   39  ansible -m yum -a "name=httpd state=absent" webserver --become
   40  ansible -m yum -a "name=httpd state=present" webserver --become
   41  clear
   42  ansible -m service -a "name=httpd state=started" webserver --become
   43  clear
   44  ansible-doc service
   45  clear
   46  touch /tmp/file.txt
   47  ansible -m copy -a "src=/tmp/file.txt dest=/file.txt" webserver
   48  ansible -m copy -a "src=/tmp/file.txt dest=/file.txt" webserver --become
   49  ansible -m yum -a "name=git state=present" webserver -become
   50  ansible -m git -a "repo=https://github.com/devopstrainer1/repo4.git dest=/tmp/git version=HEAD"
   51  ansible -m git -a "repo=https://github.com/devopstrainer1/repo4.git dest=/tmp/git version=HEAD" webserver
   52  clear
   53  ansible -m file -a "dest=/tmp/git/test2 mode=777" --become
   54  ansible -m file -a "dest=/tmp/git/test2 mode=777" webserver --bcome
   55  ansible -m file -a "dest=/tmp/git/test2 mode=777" webserver --become
   56  clear
   57  ansible -m command -a "chomd 777 /tmp/git/test.txt" webserver --become
   58  ansible -m command -a "chmod 777 /tmp/git/test.txt" webserver --become
   59  ansible -m setup webserver
   60  ansible -m setup -a "filter=ansible_user*" webserver

